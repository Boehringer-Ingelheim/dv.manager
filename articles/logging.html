<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dv.manager">
<title>logging • dv.manager</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="logging">
<meta property="og:description" content="dv.manager">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverted navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dv.manager</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/dv-manager.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Creating apps</h6>
    <a class="dropdown-item" href="../articles/customizing_application.html">Customizing our application</a>
    <a class="dropdown-item" href="../articles/timestamp.html">Add timestamp to app data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Developing modules</h6>
    <a class="dropdown-item" href="../articles/developing_module.html">Developing a new module</a>
    <a class="dropdown-item" href="../articles/passing_data.html">Passing data between modules</a>
    <a class="dropdown-item" href="../articles/css_namespace.html">Adding custom CSS styles to a module</a>
    <a class="dropdown-item" href="../articles/logging.html">logging</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>How does it work</h6>
    <a class="dropdown-item" href="../articles/how_does_work.html">How does it work (Technic/Develop)</a>
    <a class="dropdown-item" href="../articles/data_filtering.html">Sidebar filter implementation</a>
    <a class="dropdown-item" href="../articles/arguments_from_module_manager.html">Arguments from Module Manager</a>
    <a class="dropdown-item" href="../articles/data_reloading.html">Data reloading</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/qc.html">Quality Control</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="logging_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>logging</h1>
            
      
      
      <div class="d-none name"><code>logging.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="how-to-use-it">How to use it<a class="anchor" aria-label="anchor" href="#how-to-use-it"></a>
</h2>
<p>You can start using the logger simply by activating it and sending a message.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_activate</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">inform</a></span><span class="op">(</span><span class="st">"Logged message"</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_deactivate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In its default state, the logger will capture and decorate any ‘message’ or ‘warning’ condition. Simply put, any message you send using <code>message</code>, <code>warning</code>, <code><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">rlang::inform</a></code> and <code><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">rlang::warn</a></code>. Usually we will favour the <code>rlang</code> functions as adding fields to use in our logger is simpler.</p>
</div>
<div class="section level2">
<h2 id="using-logging-levels">Using logging levels<a class="anchor" aria-label="anchor" href="#using-logging-levels"></a>
</h2>
<p>The logger can have different print granularities depending on the logging level selected. A different level can be specified in each of the logging messages sent by including a logging level field in it.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_activate</a></span><span class="op">(</span><span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu"><a href="../reference/logging.html">log_default_handlers</a></span><span class="op">(</span>level <span class="op">=</span> <span class="st">"info"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">inform</a></span><span class="op">(</span><span class="st">"This will be printed"</span>, level <span class="op">=</span> <span class="st">"info"</span><span class="op">)</span></span>
<span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">inform</a></span><span class="op">(</span><span class="st">"This will not"</span>, level <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_deactivate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The logging levels and their numerical value can be checked with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu">log_get_levels</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="logging-messages-sent-from-your-module">Logging messages sent from your module<a class="anchor" aria-label="anchor" href="#logging-messages-sent-from-your-module"></a>
</h2>
<p>A common use case will be using the logger to send messages from inside your module. To do this you can include the package name as an argument when you send the message. This can be done in a simple way using <code>rlang</code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_activate</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">inform</a></span><span class="op">(</span><span class="st">"An inform with package name"</span>, package <span class="op">=</span> <span class="st">"my_package"</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_deactivate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can use the <code>packageName</code> function to dynamically get the name of your package.</p>
<p>You can also call <code>log_use_log</code> from <code>dv.manager</code> in the root of the package containing the module. This will add a file to your <code>R/</code> directory with two convenience functions that automatically add the package name.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Will create an R/utils_logging.R file with two convenience functions</span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_use_log</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_activate</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">log_inform</span><span class="op">(</span><span class="st">"An inform with package name"</span><span class="op">)</span></span>
<span><span class="fu">log_warning</span><span class="op">(</span><span class="st">"A warning with package name"</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_deactivate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="advanced-logging">Advanced logging<a class="anchor" aria-label="anchor" href="#advanced-logging"></a>
</h2>
<p><code>dv.manager</code> logging system is based on <a href="https://adv-r.hadley.nz/conditions.html" class="external-link">R’s condition system</a>. This logging system simply specifies a set of <code>globalCallingHandlers</code> that will capture and log the messages, warnings and/or errors as specified by the handlers.</p>
<div class="section level3">
<h3 id="the-default-handlers">The default handlers<a class="anchor" aria-label="anchor" href="#the-default-handlers"></a>
</h3>
<p>This is a low level logging and that makes it very flexible.</p>
<p>By default, the condition will contain the same fields as any standard <code><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">rlang::inform</a></code> or <code><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">rlang::warn</a></code> being the most important:</p>
<ul>
<li>message: [character(1)] The message to be logged</li>
</ul>
<p>It expects that the module developer has added the fields:</p>
<ul>
<li>package: [character(1)] The name of the package that sent the condition (added automatically if <code>log_info</code> and <code>log_warn</code> were used).</li>
<li>level: [numeric(1)] a level for logging granularity.</li>
</ul>
<p>The handlers will try to add the following fields to the condition before formatting:</p>
<ul>
<li>date: [character(1)] A timestamp for the message.</li>
<li>ns: [character(1)] The namespace of the module that sent the condition.</li>
<li>sess_id: [character(1)] The Shiny session id that sent the condition.</li>
<li>short_sess_id: [character(1)] A truncated version of the sess_id to improve human-readibility.</li>
</ul>
<p>The default handlers present and format this information.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">log_default_handlers</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">level</span> <span class="op">=</span> <span class="fl">999</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">format_str</span> <span class="op">&lt;-</span> <span class="st">"[{date}][{package}|{short_sess_id}|{ns}]:{message}"</span></span>
<span></span>
<span>  <span class="va">cnd_to_str</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">cnd</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_add_date</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_add_ns</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_add_sess_id</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_add_short_sess_id</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_format</a></span><span class="op">(</span><span class="va">format_str</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu">log_check_print</span><span class="op">(</span><span class="va">cnd</span>, <span class="va">level</span><span class="op">)</span><span class="op">)</span> <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="fu">cnd_to_str</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>      <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/cnd_muffle.html" class="external-link">cnd_muffle</a></span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    warning <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu">log_check_print</span><span class="op">(</span><span class="va">cnd</span>, <span class="va">level</span><span class="op">)</span><span class="op">)</span> <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_warning</a></span><span class="op">(</span><span class="fu">cnd_to_str</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/cnd_muffle.html" class="external-link">cnd_muffle</a></span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The <code>log_add*</code> functions add extra fields to the condition that can be used later by <code><a href="../reference/logging.html">log_format()</a></code> to create a logging message. To print these messages we use the <a href="https://cli.r-lib.org/" class="external-link"><code>cli</code></a> package. The <code>log_format</code> function is a convenience function that allows quick formatting of the condition. It allows using a <a href="https://glue.tidyverse.org/" class="external-link"><code>glue</code></a>-like string where the parameters are fields in the condition. If a field used in the format is not present an <code>NA</code> value is returned instead.</p>
</div>
<div class="section level3">
<h3 id="creating-custom-handlers">Creating custom handlers<a class="anchor" aria-label="anchor" href="#creating-custom-handlers"></a>
</h3>
<p>The default handlers are convenient, but the logging behavior can be modified by using a different set of handlers…</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_handlers</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">format_str</span> <span class="op">&lt;-</span> <span class="st">"Date:{date}|Pkg:{package}|{custom_field}:{message}"</span></span>
<span></span>
<span>  <span class="va">cnd_to_str</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">cnd</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_add_date</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_format</a></span><span class="op">(</span><span class="va">format_str</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="va">cnd</span><span class="op">[[</span><span class="st">"print_me"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="fu">cnd_to_str</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/cnd_muffle.html" class="external-link">cnd_muffle</a></span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    warning <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_warning</a></span><span class="op">(</span><span class="fu">cnd_to_str</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/cnd_muffle.html" class="external-link">cnd_muffle</a></span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_activate</a></span><span class="op">(</span><span class="fu">my_handlers</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">log_inform</span><span class="op">(</span><span class="st">"I will print this and its custom_field will be 1"</span>, print_me <span class="op">=</span> <span class="cn">TRUE</span>, custom_field <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">log_inform</span><span class="op">(</span><span class="st">"I will print this and its custom_field will be NA"</span>, print_me <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">log_inform</span><span class="op">(</span><span class="st">"I will not print this"</span>, print_me <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">dv.manager</span><span class="fu">::</span><span class="fu"><a href="../reference/logging.html">log_deactivate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>As you can see we can add new fields for logging, we can supress some messages depending on the fields, etc. This allows filtering logging messages by package, session, logging level, etc. So it adapts to our particular need during development.</p>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<ul>
<li>When <code>log_activate</code> is called, an error similar to the following appears:</li>
</ul>
<blockquote>
<p>Error in globalCallingHandlers(…) : should not be called with handlers on the stack</p>
</blockquote>
<p>The error above means you are activating the logger from an environment that already has defined some calling handlers, usually with <code>withCallingHandlers</code>. <code>shiny</code> in particular does this when an app starts, therefore you cannot activate logging once you are inside the application. The logger is based on setting <code>globalCallingHandlers</code> and setting those is tricky within other functions. The recommendation is to make the call to <code>log_activate</code> in your root session and not within functions.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Boehringer-Ingelheim Pharma GmbH &amp; Co.KG, Sorin Voicu, Luis Morís Fernández.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

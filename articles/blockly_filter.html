<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>(DEVELOPMENT) Blockly Filter • dv.manager</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="(DEVELOPMENT) Blockly Filter">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverted" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dv.manager</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/dv-manager.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Creating apps</h6></li>
    <li><a class="dropdown-item" href="../articles/customizing_application.html">Customizing our application</a></li>
    <li><a class="dropdown-item" href="../articles/timestamp.html">Add timestamp to app data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developing modules</h6></li>
    <li><a class="dropdown-item" href="../articles/developing_module.html">Developing a new module</a></li>
    <li><a class="dropdown-item" href="../articles/passing_data.html">Passing data between modules</a></li>
    <li><a class="dropdown-item" href="../articles/css_namespace.html">Adding custom CSS styles to a module</a></li>
    <li><a class="dropdown-item" href="../articles/logging.html">logging</a></li>
    <li><a class="dropdown-item" href="../articles/blockly_filter.html">(DEVELOPMENT) Blockly Filter</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>How does it work</h6></li>
    <li><a class="dropdown-item" href="../articles/how_does_work.html">How does it work (Technic/Develop)</a></li>
    <li><a class="dropdown-item" href="../articles/data_filtering.html">Sidebar filter implementation</a></li>
    <li><a class="dropdown-item" href="../articles/arguments_from_module_manager.html">Arguments from Module Manager</a></li>
    <li><a class="dropdown-item" href="../articles/data_reloading.html">Data reloading</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/qc.html">Quality Control</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>(DEVELOPMENT) Blockly Filter</h1>
            
      

      <div class="d-none name"><code>blockly_filter.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="using-the-development-blockly-filter">Using the development blockly Filter<a class="anchor" aria-label="anchor" href="#using-the-development-blockly-filter"></a>
</h2>
<p><strong>Note that this filter is still in development stage and
should not be used in production apps.</strong></p>
<p>To activate this functionality, you only have to replace the
<code>run_app</code> call with <code>run_app_dev_filter</code>.</p>
<p><img src="../reference/figures/filter_overview.png" style="width:100.0%"></p>
<p>On this application you will notice that there are no filters on the
left side but only a “Show filter” (1) button appears. When clicked this
button will open the filter modal where you can design your filter.</p>
<p>The filter works by selecting blocks from the categories (3), or by
searching using the search box in (4), in to the canvas (2) that then
are connected to create a filter.</p>
<p>Once a filter is created it can be applied by pressing the “Apply
filter” (5). Notice that, opposed to the previous filter, it is not
applied automatically and it must be applied explicitely.</p>
</div>
<div class="section level2">
<h2 id="subject-filter">Subject filter<a class="anchor" aria-label="anchor" href="#subject-filter"></a>
</h2>
<p>This filter is used to select a subpopulation. You can find it in the
<em>“Filter Types”</em> category.</p>
<p>It will filter all the tables for the subjects that match a specific
set of conditions. For example, in the image below we have created a
filter that filters for all subjets that:</p>
<ul>
<li>Are Female</li>
<li>Are not in the 63 to 73 range</li>
<li>And have had Erythema or a Serious Adverse Event</li>
</ul>
<p><img src="../reference/figures/subject_filter_example.png" style="width:100.0%"></p>
</div>
<div class="section level2">
<h2 id="dataset-filter">Dataset filter<a class="anchor" aria-label="anchor" href="#dataset-filter"></a>
</h2>
<p>These set of filters are used to filter a single table from the
dataset. You can find them in the <em>“Filter Types”</em> category.</p>
<p>It will filter a single table, and will have no impact on the rest of
the tables. For example, in the image below we have created a filter for
the “adae” table, where only “Erythemas” or “Adverse Event” rows are
included.</p>
<p><img src="../reference/figures/dataset_filter_example.png" style="width:100.0%"></p>
</div>
<div class="section level2">
<h2 id="creating-our-first-filter">Creating our first filter<a class="anchor" aria-label="anchor" href="#creating-our-first-filter"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Notice the usage of ::: as several of the functions are not exported yet</span></span>
<span><span class="co"># until a final version of the filter is provided</span></span>
<span></span>
<span><span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">run_app_dev_filter</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"D0"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      adsl <span class="op">=</span> <span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">get_pharmaverse_data</span><span class="op">(</span><span class="st">"adsl"</span><span class="op">)</span>,</span>
<span>      adae <span class="op">=</span> <span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">get_pharmaverse_data</span><span class="op">(</span><span class="st">"adae"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"D2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      adsl <span class="op">=</span> <span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">get_pharmaverse_data</span><span class="op">(</span><span class="st">"adsl"</span><span class="op">)</span>,</span>
<span>      adae <span class="op">=</span> <span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">get_pharmaverse_data</span><span class="op">(</span><span class="st">"adae"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  module_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Listing"</span> <span class="op">=</span> <span class="fu">dv.listings</span><span class="fu">::</span><span class="fu">mod_listings</span><span class="op">(</span><span class="st">"mod_listing"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adsl"</span>, <span class="st">"adae"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  filter_data <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span>  filter_key <span class="op">=</span> <span class="st">"USUBJID"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Open the “Filter” modal.</li>
<li>Click on the “Filter Types” category.</li>
<li>Drag the “Subject Filter” block into the canvas.</li>
<li>Open the “adsl” category and drag the “AGE” block into the canvas.
<ul>
<li>Alternatively, type “AGE” in the search box.</li>
</ul>
</li>
<li>Connect the “AGE” block to the “Subject Filter” block.</li>
<li>Click on any of the values in the “AGE” block to open the slider and
select a range.</li>
<li>Close the slider.</li>
<li>Apply the filter.</li>
</ul>
<p>Now lets modify it:</p>
<ul>
<li>Disconnect the “AGE” block by dragging it away from the “Subject
Filter” block.</li>
<li>Open the “Operations” category.</li>
<li>Drag an “AND” block into the canvas.
<ul>
<li>You can change the operation using the dropdown in the block.</li>
</ul>
</li>
<li>Connect the “Subject Filter” block to the “AND” block.</li>
<li>Connect the “AGE” block to the “AND” block.</li>
<li>Drag the “SEX” block from the “adsl” category into the canvas and
connect it to the “AND” block.</li>
<li>Click on the selected values in the “SEX” block to open the dropdown
menu and select only the “F” value.</li>
<li>Close the dropdown menu.</li>
<li>Apply the filter.</li>
</ul>
</div>
<div class="section level2">
<h2 id="exporting-a-filter-and-using-it-as-a-preset-filter">Exporting a filter and using it as a preset filter<a class="anchor" aria-label="anchor" href="#exporting-a-filter-and-using-it-as-a-preset-filter"></a>
</h2>
<p>Now you can export a filter to a file using the “Export Filter”
button. This file can then be used in the app call as a preset
filter.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Notice the usage of ::: as several of the functions are not exported yet</span></span>
<span><span class="co"># until a final version of the filter is provided</span></span>
<span></span>
<span><span class="fu">dv.manager</span><span class="fu">:::</span><span class="fu">run_app_dev_filter</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  state <span class="op">=</span> <span class="st">"path/to/filter/file.json"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="known-issues-and-faq">Known issues and FAQ<a class="anchor" aria-label="anchor" href="#known-issues-and-faq"></a>
</h2>
<ul>
<li>Is bookmarking supported?
<ul>
<li>Yes.</li>
</ul>
</li>
<li>One of the “AND”/“OR” pieces has no connections, what do I do?
<ul>
<li>Delete it and drag a new one.</li>
</ul>
</li>
<li>The search box does not work?
<ul>
<li>At least three characters must be used in the search box before it
starts searching.</li>
</ul>
</li>
<li>I have applied the filter but no filtering is happening.
<ul>
<li>Check that there are no unconnected pieces. If any piece is not
connected the filter cannot be applied.</li>
</ul>
</li>
<li>I have made a selection for a categorical variable but it is not
correctly applied.
<ul>
<li>When selecting categorical variables it is required that the
dropdown menu is closed before the selection can be applied.</li>
</ul>
</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Boehringer-Ingelheim Pharma GmbH &amp; Co.KG, Luis Morís Fernández, Sorin Voicu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
